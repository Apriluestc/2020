### 什么是 SQL 注入？如何预防 SQL 注入？

**什么是 SQL 注入**

所谓 SQL 注入式攻击，就是攻击者把 SQL 命令插入到 Web 表单的输入域或页面请求的查询字符串，欺骗服务器恶意执行 SQL 命令，**具
体来说，它就是利用现有程序，将恶意的 SQL 命令注入到后台数据库引擎上的能力，它可以通过在 Web 表单中输入恶意 SQL 语句得到一个存在安全漏洞的网站上的数据库，而不是按照设计者意图去执行 SQL 语句**

**如何防范 SQL 注入(针对 JSP)**

在利用表单输入的内容构造 SQL 命令之前，把所有输入内容过滤一番就可以了

- 使用正则表达式过滤传入的参数
- 字符串过滤
- JSP 中调用该函数检查是否包含非法字符
- JSP 页面判断代码

凡涉及到执行的 SQL 语句中有变量时，用 JDBC 提供的 PreparedStatement 就可以，切记不要用拼接字符串的方法就可以了

### fork 和 vfork

fork 和 vfork 都是创建一个进程，但是有一下区别

- fork 子进程拷贝父进程的数据段、代码段，vfork 子进程和父进程则共享数据段
- fork 父子进程执行次序不确定，vfork 保证子进程先运行，在调用 exec 或 exit 之前与父进程数据是共享的，在它调用 exec 或 exit 之后父进程才可能被调度运行
- vfork 保证子进程先运行，在它调用 exec 或 exit 之后父进程才可能被调度运行，如果在调用这两个函数之前子进程依赖于父进程的进一步动作，则会导致死锁

进程创建 fork，此奇妙之处在于它被调用一次，却返回两次，它可能有三种不同的返回值

- 在父进程中，fork 返回新创建的子进程的 PID
- 在子进程中，fork 返回 0
- 如果出现错误，fork 返回一个负值

**操作系统创建进程的步骤**

- 申请新的 PCB
- 为新进程分配资源
- 初始化 PCB
- 将新进程插入到就绪队列中

**fork 调用底层**

- fork、vfork、_clone -> clone -> do_fork -> copy_process ->
  - dup_task_struct 为新进程创建与父进程值相同的内核栈，thread_info 和 task_struct，此时父子进程描述符相同
  - check 当前用户拥有进程数未超过给它分配的资源限制
  - 区别父子进程描述符，部分进程描述符成员清零或设置
  - set 子进程 state 为 TASK_UNINTERRUPTIBLE
  - copy_flags 更新 task_struct 中的 flags，进程是否拥有超级用户权限清零，进程还没调用 exec 函数表示设置
  - alloc_pid 为新进程分配有效的 PID
  - 根据 clone 参数，copy_process 拷贝或共享打开的文件，进程地址空间等
  - copy_process 扫尾并返回指向子进程的指针
