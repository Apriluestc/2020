### 调试技巧

#### VS2017 调试技巧

- 设置断点调试

在一行代码的左侧点击即可设置断点，按 F5 即可运行到第一个断点处暂停

- 逐语句调试

按 F11 逐语句调试，即可一步一步执行

- 逐过程调试

按 F10 逐过程调试，此时不会进入函数内部

- 跳出当前函数

在一个函数里面时想要跳出此函数，可以按 Shift + F11 可直接运行完当前函数，直接 return 到函数外面去

- 运行到光标处

在一行代码上右键，选择“运行到光标处”，即可快速运行到当前位置，如果之前有断点则会停在断点处

- 快速重启

Ctrl + Shift + F5

- 添加监视

可以在监视窗口添加你想关注的变量，以及对变量进行运算，比如取地址

- 检查函数调用栈

函数调用堆栈窗口显示了当前正在调用函数的顺序，顶层显示的是当前函数，第二行显示的是调用当前函数的函数，越往下越深，依次类推

可以在调用堆栈上双击可以看到改代码的位置，有键可以做其他操作，比如运行到光标处

![Add image](https://github.com/Apriluestc/2020/blob/master/pics/debug.png)

#### gdb 调试技巧

- 简单命令

  - 查看各级函数调用栈信息：bt
  - 继续运行到当前函数返回为止，然后停下来等待命令：finish
  - 帧编号，选择栈帧：f
  - 查看当前栈帧局部变量的值：info
  - 列出源代码，接着上次的依次往下列出，每次 10 行：l 或者 list
  - 列出从第几行开始的源代码：list + 行号
  - 列出从某个函数的源代码：list + 函数名
  - 开始执行程序，停在 main 函数第一行语句前面等待命令：start
  - 执行下一条语句，即逐过程调试：next 或者 n
  - 执行下一条语句，逐语句调试：step 或者 s
  - 继续执行到断点位置：run
  - 单步执行一条机器指令，通常一条语句由多条机器指令构成，如：i++ 由三条汇编构成：nexti 和 stepi
  - 打印表达式的值，通过表达式可以修改变量的值或者调用函数：print 或者 p
  - 退出 gdb 调试环境：quit 或者 q
  - 修改变量值：set var
  - 删除程序中所有断点：clear
  - 删除此行断点：clear 行号
  - 删除该函数的断点：clear 函数名
  - 查看程序是否在运行，进程号被暂停的原因：info program
  - 多文件设置断点，在 file.cpp 文件的第 1000 行设置断点：break file.cpp:1000
  - 在当前行号的前面或后面停住：break + offset

- 启动 gdb 方法

  - gdb <可执行程序>
  - gdb <可执行程序> core，用 gdb 同时调试一个可执行程序和一个 core 文件，core 是程序非法执行 core dump 产生的文件
  - gdb <可执行程序> PID，如果你的程序是一个服务程序，那么你可以指定这个服务程序运行时的 IP，gdb 会自动 attach 上

- 设置观察点

观察点一般观察某个表达式(变量也是一种表达式)，如果有变化，马上停住程序



- 设置捕点
